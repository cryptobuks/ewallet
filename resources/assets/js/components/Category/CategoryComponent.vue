<template>    <div class="row">    <div class="col-sm-12">        <div class="box box-primary">            <div class="box-body">                <button type="button" class="btn btn-sm btn-primary" v-on:click="openModal('Title')">                    <i class="fa fa-fw fa-plus"></i> Add new Category                </button>            </div>            <div class="box-body table-responsive">                <table class="table table-bordered">                    <tbody>                    <tr>                        <th class="text-center" title="Category">                            <div class="hidden-xs">                                Category                            </div>                            <div class="visible-xs">                                <i class="fa fa-fw fa-list"></i>                            </div>                        </th>                        <th class="text-center" title="Category">                            <div class="hidden-xs">                                Actions                            </div>                            <div class="visible-xs">                                <i class="fa fa-fw fa-cog"></i>                            </div>                        </th>                    </tr>                    <tr v-for="(category, index) in categories">                        <td class="text-center">                            <span>{{ category.name }}</span>                        </td>                        <td>                            <button type="button" title="Edit" class="btn btn-primary btn-xs" v-on:click="edit(category.id)"><i class="fa fa-fw fa-pencil-square-o"></i></button>                            <DeleteButtonComponent :recordId="category.id" :endpoint="apiUrl" entity="categories" :index="index" :loading="true"></DeleteButtonComponent>                        </td>                    </tr>                    </tbody>                </table>            </div>            <!-- /.box-body -->            <loading :loading="loading"></loading>            <!-- /.box-body -->            <div class="clearfix text-center">                <pagination :data="paginationData" @pagination-change-page="getCategories"></pagination>            </div>        </div>    </div>    <bootstrapModal ref="modal" :need-header="true" :need-footer="false" :size="'large'" :opened="onOpenModal" :closed="onCloseModal">        <div slot="title">            {{ modal.title }}        </div>        <div slot="body">            <div class="box-body">                <div class="form-group" v-bind:class="[errors.name ? 'has-error' : '']">                    <label for="name">Name *</label>                    <input type="text" class="form-control" id="name" placeholder="Enter name" v-model="category.name">                    <span class="help-block" v-if="errors.name">{{ errors.name[0]}}</span>                </div>            </div>            <div class="box-footer">                <button class="btn btn-primary btn-sm" v-if="!editMode" v-on:click="store">                    <i class="fa fa-fw fa-plus"></i> Add                </button>                <button class="btn btn-primary btn-sm" v-if="editMode" v-on:click="update(category.id)">                    <i class="fa fa-fw fa-save"></i> Edit                </button>            </div>        </div>    </bootstrapModal>    </div></template><script>  import { getCall } from '../Api/utils/Endpoint';  import { postCall } from '../Api/utils/Endpoint';  import CategoryApi from '../Api/CategoryApi';  import pagination from "../Helpers/Pagintaion";  import loading from "../Helpers/LoadingComponent";  import DeleteButtonComponent from "../Helpers/Buttons/DeleteButtonComponent";  import bootstrapModal from "vue2-bootstrap-modal";  export default {    name: "CategoryComponent",    components: {      DeleteButtonComponent,      bootstrapModal,      pagination,      loading    },    data() {      return {        categories: {},        category: {          name: null,          user_id: null        },        paginationData: {},        loading: false,        modal: {          title: null        },        errors: [],        editMode: false      }    },    mounted() {      this.getCategories();      this.apiUrl = this.$root.$data.apiUrl;      this.category.user_id = this.$root.$data.userId;    },    methods: {        store () {          console.log('store');          postCall(this.$root.$data.apiUrl + CategoryApi.store, this.category, { user: this.$root.$data.userId})            .then(response => {              this.$refs.modal.close();              this.category.name = null;              swal(response.data.message, "", "success");              this.getCategories(this.paginationData.current_page);            })            .catch(error => {              if (error.response.status === 422) {                this.errors = error.response.data.errors;              }              if (error.response.status === 400) {                swal(error.response.data.message, "", "error");              }            });        },          edit(id) {            this.editMode = true;            this.loading = true;            getCall(this.$root.$data.apiUrl + CategoryApi.index + '/' + id, { user: this.$root.$data.userId })              .then(response => {                this.category = response.data;                this.openModal("Edit order - " + this.category.name);                this.loading = false;              })              .catch(error => {                this.loading = false;                swal(error.response.data.message, "", "error");              });          },        update(id) {            postCall(this.$root.$data.apiUrl + CategoryApi.index + '/' + this.category.id + "?_method=PATCH", this.category)              .then(response => {                this.loading = false;                this.errors = [];                this.getCategories(this.paginationData.current_page);                this.$refs.modal.close();                swal(response.data.message, "", "success");              })              .catch(error => {                this.loading = false;                this.errors = [];                if (error.response.status === 422) {                  this.errors = error.response.data.errors;                }                if (error.response.status === 400) {                  swal(response.data.message, "", "error");                }              });          // this.$root.$data.apiUrl + "/orders/" + this.order.id + "?_method=PATCH", this.order        },        getCategories(page = 1) {          this.loading = true;          getCall(this.$root.$data.apiUrl + CategoryApi.index + '?page=' + page,  {user: this.$root.$data.userId})            .then(response => {              this.loading = false;              this.categories = response.data.categories.data;              this.paginationData = response.data.categories;            })            .catch(error => {              this.loading = false;              swal(error.response.data.message, "", "error");            });        },        openModal(title) {            this.modal.title = title;            this.$refs.modal.open();        },        onOpenModal() {        },        onCloseModal() {            this.editMode = false;            this.category = {              user_id: this.user_id,              name: null            };            this.errors = [];      },    }  }</script><style scoped></style>